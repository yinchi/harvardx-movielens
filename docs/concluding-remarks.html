<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>Chapter 5 Concluding remarks | HarvardX PH125.9x: Movielens project</title>
  <meta name="description" content="See also: _output.yml, _bookdown.yml" />
  <meta name="generator" content="bookdown 0.25 and GitBook 2.6.7" />

  <meta property="og:title" content="Chapter 5 Concluding remarks | HarvardX PH125.9x: Movielens project" />
  <meta property="og:type" content="book" />
  
  <meta property="og:description" content="See also: _output.yml, _bookdown.yml" />
  

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="Chapter 5 Concluding remarks | HarvardX PH125.9x: Movielens project" />
  
  <meta name="twitter:description" content="See also: _output.yml, _bookdown.yml" />
  

<meta name="author" content="Yin-Chi Chan" />


<meta name="date" content="2022-04-26" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="final-validation.html"/>
<link rel="next" href="references.html"/>
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />








<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>
<script src="libs/kePrint-0.0.1/kePrint.js"></script>
<link href="libs/lightable-0.0.1/lightable.css" rel="stylesheet" />


<style type="text/css">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
/* Used with Pandoc 2.11+ new --citeproc when CSL is used */
div.csl-bib-body { }
div.csl-entry {
  clear: both;
}
.hanging div.csl-entry {
  margin-left:2em;
  text-indent:-2em;
}
div.csl-left-margin {
  min-width:2em;
  float:left;
}
div.csl-right-inline {
  margin-left:2em;
  padding-left:1em;
}
div.csl-indent {
  margin-left: 2em;
}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="./">HarvardX 125.9 - Movielens project</a></li>

<li class="divider"></li>
<li><a href="index.html#preface">Preface<span></span></a>
<ul>
<li class="chapter" data-level="0.1" data-path="index.html"><a href="index.html"><i class="fa fa-check"></i><b>0.1</b> R setup<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction<span></span></a>
<ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#data-description"><i class="fa fa-check"></i><b>1.1</b> Data description<span></span></a>
<ul>
<li class="chapter" data-level="1.1.1" data-path="introduction.html"><a href="introduction.html#movie-genres"><i class="fa fa-check"></i><b>1.1.1</b> Movie genres<span></span></a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#project-objective"><i class="fa fa-check"></i><b>1.2</b> Project Objective<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="sec-linear-models.html"><a href="sec-linear-models.html"><i class="fa fa-check"></i><b>2</b> Linear regression models<span></span></a>
<ul>
<li class="chapter" data-level="2.1" data-path="sec-linear-models.html"><a href="sec-linear-models.html#sec-notation"><i class="fa fa-check"></i><b>2.1</b> Overview and notation<span></span></a></li>
<li class="chapter" data-level="2.2" data-path="sec-linear-models.html"><a href="sec-linear-models.html#using-the-mean-rating-only"><i class="fa fa-check"></i><b>2.2</b> Using the mean rating only<span></span></a></li>
<li class="chapter" data-level="2.3" data-path="sec-linear-models.html"><a href="sec-linear-models.html#modeling-movie-effects"><i class="fa fa-check"></i><b>2.3</b> Modeling movie effects<span></span></a>
<ul>
<li class="chapter" data-level="2.3.1" data-path="sec-linear-models.html"><a href="sec-linear-models.html#clamping-the-predictions"><i class="fa fa-check"></i><b>2.3.1</b> Clamping the predictions<span></span></a></li>
</ul></li>
<li class="chapter" data-level="2.4" data-path="sec-linear-models.html"><a href="sec-linear-models.html#modeling-movie-and-user-effects"><i class="fa fa-check"></i><b>2.4</b> Modeling movie and user effects<span></span></a></li>
<li class="chapter" data-level="2.5" data-path="sec-linear-models.html"><a href="sec-linear-models.html#adding-genre-effects"><i class="fa fa-check"></i><b>2.5</b> Adding genre effects<span></span></a></li>
<li class="chapter" data-level="2.6" data-path="sec-linear-models.html"><a href="sec-linear-models.html#adding-a-time-effect"><i class="fa fa-check"></i><b>2.6</b> Adding a time effect<span></span></a></li>
<li class="chapter" data-level="2.7" data-path="sec-linear-models.html"><a href="sec-linear-models.html#sec-regularization"><i class="fa fa-check"></i><b>2.7</b> Adding <span class="math inline">\(L_2\)</span> regularization<span></span></a></li>
<li class="chapter" data-level="2.8" data-path="sec-linear-models.html"><a href="sec-linear-models.html#section-summary"><i class="fa fa-check"></i><b>2.8</b> Section summary<span></span></a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="funks-matrix-factorization-algorithm.html"><a href="funks-matrix-factorization-algorithm.html"><i class="fa fa-check"></i><b>3</b> Funk’s matrix factorization algorithm<span></span></a>
<ul>
<li class="chapter" data-level="3.1" data-path="funks-matrix-factorization-algorithm.html"><a href="funks-matrix-factorization-algorithm.html#computing-the-residuals"><i class="fa fa-check"></i><b>3.1</b> Computing the residuals<span></span></a></li>
<li class="chapter" data-level="3.2" data-path="funks-matrix-factorization-algorithm.html"><a href="funks-matrix-factorization-algorithm.html#the-recommenderlab-package-first-failure"><i class="fa fa-check"></i><b>3.2</b> The <span><code>recommenderlab</code></span> package: first failure<span></span></a></li>
<li class="chapter" data-level="3.3" data-path="funks-matrix-factorization-algorithm.html"><a href="funks-matrix-factorization-algorithm.html#the-rrecsys-package-second-failure"><i class="fa fa-check"></i><b>3.3</b> The <span><code>rrecsys</code></span> package: second failure<span></span></a></li>
<li class="chapter" data-level="3.4" data-path="funks-matrix-factorization-algorithm.html"><a href="funks-matrix-factorization-algorithm.html#writing-our-own-funk-mf-algorithm"><i class="fa fa-check"></i><b>3.4</b> Writing our own Funk MF algorithm<span></span></a></li>
<li class="chapter" data-level="3.5" data-path="funks-matrix-factorization-algorithm.html"><a href="funks-matrix-factorization-algorithm.html#computing-the-optimal-rank-of-matrix-uv"><i class="fa fa-check"></i><b>3.5</b> Computing the optimal rank of matrix <span class="math inline">\(UV\)</span><span></span></a></li>
<li class="chapter" data-level="3.6" data-path="funks-matrix-factorization-algorithm.html"><a href="funks-matrix-factorization-algorithm.html#final-matrix-factorization-and-rmse-values"><i class="fa fa-check"></i><b>3.6</b> Final matrix factorization and RMSE values<span></span></a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="final-validation.html"><a href="final-validation.html"><i class="fa fa-check"></i><b>4</b> Final validation<span></span></a></li>
<li class="chapter" data-level="5" data-path="concluding-remarks.html"><a href="concluding-remarks.html"><i class="fa fa-check"></i><b>5</b> Concluding remarks<span></span></a>
<ul>
<li class="chapter" data-level="5.1" data-path="concluding-remarks.html"><a href="concluding-remarks.html#the-cmfrec-package-and-benchmarks"><i class="fa fa-check"></i><b>5.1</b> The <span><code>cmfrec</code></span> package and benchmarks<span></span></a></li>
</ul></li>
<li><a href="references.html#references">References<span></span></a></li>
<li class="appendix"><span><b>Appendices<span></span></b></span></li>
<li class="chapter" data-level="A" data-path="sec-code.html"><a href="sec-code.html"><i class="fa fa-check"></i><b>A</b> Code listing: <span><code>svd.cpp</code></span><span></span></a></li>
<li class="chapter" data-level="B" data-path="session-info.html"><a href="session-info.html"><i class="fa fa-check"></i><b>B</b> Session info<span></span></a></li>
<li class="divider"></li>
<li><a href="https://github.com/yinchi/harvardx-movielens" target="blank">Published with bookdown</a></li>

</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">HarvardX PH125.9x: Movielens project</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="concluding-remarks" class="section level1 hasAnchor" number="5">
<h1><span class="header-section-number">Chapter 5</span> Concluding remarks<a href="concluding-remarks.html#concluding-remarks" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>In this project, we train a recommender system to predict movie ratings on a scale from 0.5 to 5,
using the Movielens 10M <span class="citation">(<a href="#ref-movielens10M" role="doc-biblioref">GroupLens 2009</a>)</span> dataset. Our final model considers user, movie, genre,
and time-based biases, and uses Funk’s matrix factorization to approximate the residuals after
these effects have been removed from the ratings. The RMSE achieved by our final model,
as evaluated using the validation partition, is
<strong>0.7941947</strong>.</p>
<p>Note that the effect of adding genre and time-based biases was small. In particular, the genres
of a movie can be uniquely determined from its <code>movieID</code>, and most movies have been rated many times,
decreasing the importance of genre information. For the same reason, adding the year of release
of each movie as a model feature is also unlikely to significantly improve the results.
However, this result is because the validation set for this project was deliberately constructed <strong>not</strong> to
contain any movies not in the training and test sets. In a live environment, adding
genre and time-based information will prove useful for predicting ratings of <em>new</em>
movies, where a movie bias cannot be computed (using a zero value is the likely best solution).
In this case, adding the year of release as an additional model feature likely <em>would</em> improve
prediction accuracy. Another possible feature we could have used is the age of a movie
<em>at the time it was rated</em>. The tag information included in the original Movielens 10M dataset
(but unused in this project) could also be useful for estimating the ratings of new or rarely
rated movies.</p>
<p>A consideration is the fact that while this project attempts to minimize the error of the raw
ratings, a possibly better approach may be binary: would a user like a movie they have not yet
watched, if that movie were recommended to them? If we assume a user enjoys a movie if they
rate it 3.5 stars or higher, then the confusion matrix as computed on the validation set is:</p>
<div class="sourceCode" id="cb51"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb51-1"><a href="concluding-remarks.html#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Classify movies as good or bad based on 3.5-star treshold and compute confusion matrix</span></span>
<span id="cb51-2"><a href="concluding-remarks.html#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="fu">confusionMatrix</span>(<span class="fu">as.factor</span>(<span class="fu">ifelse</span>(predicted_ratings_FINAL_VALIDATION <span class="sc">&gt;=</span> <span class="fl">3.5</span>, <span class="st">&#39;Good&#39;</span>, <span class="st">&#39;Bad&#39;</span>)),</span>
<span id="cb51-3"><a href="concluding-remarks.html#cb51-3" aria-hidden="true" tabindex="-1"></a>                <span class="fu">as.factor</span>(<span class="fu">ifelse</span>(validation<span class="sc">$</span>rating <span class="sc">&gt;=</span> <span class="fl">3.5</span>, <span class="st">&#39;Good&#39;</span>, <span class="st">&#39;Bad&#39;</span>)),</span>
<span id="cb51-4"><a href="concluding-remarks.html#cb51-4" aria-hidden="true" tabindex="-1"></a>                <span class="at">positive =</span> <span class="st">&#39;Good&#39;</span>)</span></code></pre></div>
<pre><code>## Confusion Matrix and Statistics
## 
##           Reference
## Prediction    Bad   Good
##       Bad  301123 140407
##       Good 110332 448137
##                                           
##                Accuracy : 0.7493          
##                  95% CI : (0.7484, 0.7501)
##     No Information Rate : 0.5885          
##     P-Value [Acc &gt; NIR] : &lt; 2.2e-16       
##                                           
##                   Kappa : 0.4879          
##                                           
##  Mcnemar&#39;s Test P-Value : &lt; 2.2e-16       
##                                           
##             Sensitivity : 0.7614          
##             Specificity : 0.7318          
##          Pos Pred Value : 0.8024          
##          Neg Pred Value : 0.6820          
##              Prevalence : 0.5885          
##          Detection Rate : 0.4481          
##    Detection Prevalence : 0.5585          
##       Balanced Accuracy : 0.7466          
##                                           
##        &#39;Positive&#39; Class : Good            
## </code></pre>
<p>The accuracy of our model is about three-quarters, with approximately equal sensitivity and
specificity.</p>
<p>Furthermore, note that while the ratings in the Movielens dataset are discrete, the generated
predictions are not. If only discrete predictions are allowed, then a series of thresholds may be
fitted to our current model for binning (these thresholds do not have to be a half-star apart
and can instead be based on the distribution of true and predicted ratings). It remains to be seen
how such an approach would affect the accuracy of our model, as while correct binning decreases the
error of a prediction, incorrect binning may instead increase the error of a rating.
For example, for a prediction of 3.6 that is binned to 3.5, the error decreases from 0.1 to 0
given a true rating of 3.5, but increases from 0.4 to 0.5 given a true rating of 4.0.</p>
<div id="the-cmfrec-package-and-benchmarks" class="section level2 hasAnchor" number="5.1">
<h2><span class="header-section-number">5.1</span> The <a href="https://cran.r-project.org/package=cmfrec"><code>cmfrec</code></a> package and benchmarks<a href="concluding-remarks.html#the-cmfrec-package-and-benchmarks" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>After completing this project, I discovered another R package called <code>cmfrec</code> <span class="citation">(<a href="#ref-R-cmfrec" role="doc-biblioref">Cortes 2022a</a>)</span>
which can handle the size of the Movielens 10M dataset and in fact uses it for benchmarking
<span class="citation">(<a href="#ref-cmfrec-benchmarks" role="doc-biblioref">Cortes 2022b</a>)</span>. The best reported result among the R implementations
has a RMSE of <strong>0.782465</strong>, somewhat better than that achieved here.</p>
<p>There are several possible reasons why <code>cmfrec</code> outperforms our method in this project.
First, the <code>cmfrec</code> algorithms <em>update</em> user and movie biases during each iteration, rather than the
static method used here. The benchmarks shown in <span class="citation"><a href="#ref-cmfrec-benchmarks" role="doc-biblioref">Cortes</a> (<a href="#ref-cmfrec-benchmarks" role="doc-biblioref">2022b</a>)</span> show that such static methods
generally perform worse than methods with iterative bias updates. Second, methods in <code>cmfrec</code> use
alternating least squares (ALS) by default rather than the gradient descent method used here,
which improves numerical stability/convergence. Another benefit of ALS is the possibility of
massive parallelization <span class="citation">(<a href="#ref-Koren2009" role="doc-biblioref">Koren, Bell, and Volinsky 2009</a>)</span>. Finally, no optimization was performed on the learning and
regularization parameters <span class="math inline">\(\lambda\)</span> and <span class="math inline">\(\gamma\)</span> in this project.</p>

</div>
</div>
<h3>References</h3>
<div id="refs" class="references csl-bib-body hanging-indent">
<div id="ref-R-cmfrec" class="csl-entry">
Cortes, David. 2022a. <em>Cmfrec: Collective Matrix Factorization for Recommender Systems</em>. <a href="https://cran.r-project.org/package=cmfrec">https://cran.r-project.org/package=cmfrec</a>.
</div>
<div id="ref-cmfrec-benchmarks" class="csl-entry">
———. 2022b. <span>“Matrix Factorization Benchmarks.”</span> <a href="https://github.com/david-cortes/cmfrec/tree/master/benchmark">https://github.com/david-cortes/cmfrec/tree/master/benchmark</a>.
</div>
<div id="ref-movielens10M" class="csl-entry">
GroupLens. 2009. <span>“MovieLens 10<span>M</span> Dataset.”</span> <a href="https://grouplens.org/datasets/movielens/10m/">https://grouplens.org/datasets/movielens/10m/</a>.
</div>
<div id="ref-Koren2009" class="csl-entry">
Koren, Yehuda, Robert Bell, and Chris Volinsky. 2009. <span>“Matrix Factorization Techniques for Recommender Systems.”</span> <em>Computer</em> 42 (8): 30–37. <a href="https://doi.org/10.1109/mc.2009.263">https://doi.org/10.1109/mc.2009.263</a>.
</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="final-validation.html" class="navigation navigation-prev " aria-label="Previous page"><i class="fa fa-angle-left"></i></a>
<a href="references.html" class="navigation navigation-next " aria-label="Next page"><i class="fa fa-angle-right"></i></a>
    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"whatsapp": false,
"all": ["facebook", "twitter", "linkedin"]
},
"fontsettings": {
"theme": "sepia",
"family": "serif",
"size": 2
},
"edit": {
"link": "https://github.com/yinchi/harvardx-movielens/blob/main/89-conclusion.Rmd",
"text": "Edit"
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": ["movielens.pdf"],
"search": {
"engine": "fuse",
"options": null
},
"toc": {
"collapse": "subsection"
}
});
});
</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
